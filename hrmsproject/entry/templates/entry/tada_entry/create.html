{% extends 'base.html' %}
{% load static %}

{% block title %}TADA Entry - Create{% endblock %}

{% block content %}

<div class="dashboard-main-body">

    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <!-- Link to Create Page -->
     <h6 class="mb-3 fw-bold text-secondary">Entry / <span class="text-dark">Tada Entry Create </span></h6>

     <button  onclick="history.back()" class="btn-back">
   <i data-feather="arrow-left"></i> Back
</button>
</div>


 <div class="card shadow-sm">
        <div class="card-body">
           <form>
        <div class="row g-3">

          <!-- Employee Name -->
       <div class="col-md-3">
  <label class="form-label">Expense Type</label>
  <div class="custom-select-wrapper">
    <input type="text" class="custom-select-input" placeholder="Search or Select" readonly>
    <div class="custom-select-dropdown">
      <div data-value="Drinking Water Expenses">Drinking Water Expenses</div>
      <div data-value="Food Expenses Special">Food Expenses Special</div>
      <div data-value="Food Expenses">Food Expenses</div>
      <div data-value="Lodging Expenses">Lodging Expenses</div>
      <div data-value="Miscallaneous Expenses">Miscallaneous Expenses</div>
      <div data-value="Staff Refreshment">Staff Refreshment</div>
      <div data-value="Staff Welfare Expenses">Staff Welfare Expenses</div>
      <div data-value="Tollgate Expenses">Tollgate Expenses</div>
      <div data-value="Travelling Expenses">Travelling Expenses</div>
    </div>
  </div>
</div>
        <div class="col-md-3">
        <label class="form-label">Sub Expense Type</label>
  <div class="custom-select-wrapper">
    <input type="text" class="custom-select-input" placeholder="Search or Select" readonly>
    <div class="custom-select-dropdown">
      <div data-value="Bike Own">Bike Own</div>
      <div data-value="Bike Rental">Bike Rental</div>
      <div data-value="Bus">Bus</div>
      <div data-value="Car CNG">Car CNG</div>
      <div data-value="Car Petrol">Car Petrol</div>
      <div data-value="Car Rental">Car Rental</div>
      <div data-value="Taxi/Auto">Taxi/Auto</div>
      <div data-value="Train">Train</div>
    </div>
  </div>

          </div>
          <!-- Permission text -->
          <div class="col-md-3">
            <label class="form-label">From Location <span class="text-danger">*</span></label>
            <input type="text" class="form-control" required>
          </div>
        <div class="col-md-3">
            <label class="form-label">To Location <span class="text-danger">*</span></label>
            <input type="text" class="form-control" required>
          </div>
        <div class="col-md-3">
            <label class="form-label">Start Meter <span class="text-danger">*</span></label>
            <input type="text" class="form-control" required>
          </div>
        <div class="col-md-3">
            <label class="form-label">End Meter <span class="text-danger">*</span></label>
            <input type="text" class="form-control" required>
          </div>
         <div class="col-md-3">
            <label class="form-label">Total Kilometer <span class="text-danger">*</span></label>
            <input type="text" class="form-control" required>
          </div>
          <div class="col-md-3">
            <label class="form-label">Amount <span class="text-danger">*</span></label>
            <input type="text" class="form-control" required>
          </div>
   <div class="col-md-3">
    <label  class="form-label">Upload Image</label>
    <input class="form-control" type="file" accept="image/*">
    </div>
    <div class="col-md-3">
    <label  class="form-label">Meter Upload Image</label>
    <input class="form-control" type="file" accept="image/*">
    </div>
          <!-- Reason -->
          <div class="col-md-6">
            <label class="form-label">Description <span class="text-danger">*</span></label>
            <textarea class="form-control" rows="3" required></textarea>
          </div>
        <div class="col-md-1 d-flex align-items-center mb-3 text-end">
        <button class="btn btn-primary w-100">Add</button>
      </div>
        </div>

        <!-- Available Permissions -->
       <div class="container " style="margin-top:40px;">

       <p class="fw-bold fs-6 text-uppercase">TADA Sub List</p>
  <!-- Table Wrapper -->
  <div id="tableWrapper" class="table-responsive">
    <table class="balance-table" id="recordsTable">
      <thead>
        <tr>
          <th>Expense Type</th>
          <th>Sub Expense Type</th>
          <th>From Location</th>
          <th>To Location</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>
        <!-- Initially No Records -->
        <tr id="noRecordsRow"  class="table-success">
          <td colspan="5" class="no-records text-center">No Records Found</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>






                <!-- Buttons -->
                <div class="mt-5 d-flex justify-content-end gap-2">
                    <button type="submit" class="btn btn-success px-4">Submit</button>
                    <a href="#" class="btn btn-danger px-4">Cancel</a>
                </div>
            </form>


    </div>
</div>
</div>

    <!-- Card -->
<style>
    .btn-back {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background-color: #28a745; /* green shade */
  color: #fff !important;
  padding: 8px 16px;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  text-decoration: none;
  transition: 0.2s ease-in-out;
}

.btn-back:hover {
  background-color: #218838; /* darker green */
  color: #fff !important;
  text-decoration: none;
}

.btn-back i {
  font-size: 14px;
}
.form-check .form-check-input{
    margin-top:7px;
    margin-right:6px;
}
.details-box {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 6px;
      padding: 15px;
    }
    .details-box  li i {
  vertical-align: middle;
}
.custom-select-wrapper {
    position: relative;
    width: 100%;
    font-family: Arial, sans-serif;
  }

  .custom-select-input {
    width: 100%;
    padding: 8px 30px 8px 8px; /* space for arrow */
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
    cursor: pointer;
  }

  /* Dropdown arrow */
  .custom-select-wrapper::after {
    content: "";
    position: absolute;
    top: 50%;
    right: 10px;
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 6px solid #555;
    transform: translateY(-50%);
    pointer-events: none;
  }

  .custom-select-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    max-height: 150px;
    border: 1px solid #ccc;
    border-top: none;
    background: #fff;
    overflow-y: auto;
    display: none;
    z-index: 1000;
  }

  .custom-select-dropdown div {
    padding: 8px;
    cursor: pointer;
  }

  .custom-select-dropdown div:hover {
    background-color: #a4c8feff;
    color:#000;

  }
  #recordsTable {
    overflow: hidden;
  }
  .table-success {
    background-color: #28a745 !important; /* Green theme */
    color: #fff;
  }
  .no-records {
    background: #edd4d4ff;
    color: #d01616ff;
    font-weight: bold;
    text-align: center;
  }
  .balance-table {
    width: 100%;
    border-collapse: collapse;
}

.balance-table th,
.balance-table td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: left;
    font-size: 14px;
}

.balance-table th {
    background-color: #f9f9f9ff;
    font-weight: bold;
    color: #333;
}
    </style>
     

<script src="https://unpkg.com/feather-icons"></script>
<script>
  feather.replace();
  document.querySelectorAll(".custom-select-wrapper").forEach(wrapper => {
    const input = wrapper.querySelector(".custom-select-input");
    const dropdown = wrapper.querySelector(".custom-select-dropdown");

    // Show/hide dropdown on click
    input.addEventListener("click", () => {
      dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
      input.removeAttribute("readonly");
      input.focus();
    });

    // Filter items while typing
    input.addEventListener("input", () => {
      const filter = input.value.toLowerCase();
      const options = dropdown.querySelectorAll("div");
      options.forEach(opt => {
        opt.style.display = opt.textContent.toLowerCase().includes(filter) ? "block" : "none";
      });
    });

    // Select option
    dropdown.addEventListener("click", e => {
      if (e.target.dataset.value) {
        input.value = e.target.dataset.value;
        dropdown.style.display = "none";
        input.setAttribute("readonly", true);
      }
    });

    // Close dropdown if clicked outside
    document.addEventListener("click", e => {
      if (!wrapper.contains(e.target)) {
        dropdown.style.display = "none";
        input.setAttribute("readonly", true);
      }
    });
  });
  const addBtn = document.getElementById("addBtn");
  const tableBody = document.querySelector("#recordsTable tbody");
  const noRecordsRow = document.getElementById("noRecordsRow");

  // Example data from inputs (replace with your real form values)
  const dummyData = {
    expense: "Food Expenses",
    subExpense: "Bus",
    from: "Erode",
    to: "Chennai",
    amount: "1500"
  };

  addBtn.addEventListener("click", function () {
    // Remove "No Records" row if present
    if (noRecordsRow) {
      noRecordsRow.remove();
    }

    // Add new row
    const newRow = document.createElement("tr");
    newRow.innerHTML = `
      <td>${dummyData.expense}</td>
      <td>${dummyData.subExpense}</td>
      <td>${dummyData.from}</td>
      <td>${dummyData.to}</td>
      <td>${dummyData.amount}</td>
    `;
    tableBody.appendChild(newRow);
  });
</script>
{% endblock %}
